<app-header></app-header>
<div class="container mt-4">
  <form [formGroup]="userForm">
    <table class="table table-bordered table-dark">
      <tbody>
      <tr>
        <td colSpan="2">
          <div>
            Add new user
          </div>
        </td>
      </tr>
      <tr>
        <td colSpan="1" class="col-1 main-td custom-font">User name</td>
        <td colSpan="3" class="col-2 main-td">
          <input class="custom-input" type="text" style="width: 100%" formControlName="name">
          <div *ngIf="userForm.get('name')!.hasError('required')
          && userForm.get('name')!.touched" class="text-danger validator-text">
            Name is required.
          </div>
        </td>

      </tr>
      <tr>
        <td colSpan="1" class="col-1 main-td custom-font">Surname:</td>
        <td colSpan="3" class="col-2 main-td">
          <input class="custom-input" type="text" style="width: 100%" formControlName="surname">
          <div *ngIf="userForm.get('surname')!.hasError('required')
          && userForm.get('surname')!.touched" class="text-danger validator-text">
            Surname is required.
          </div>
        </td>
      </tr>
      <tr>
        <td colSpan="1" class="col-1 main-td custom-font">Email:</td>
        <td colSpan="3" class="col-2 main-td">
          <input class="custom-input" type="text" style="width: 100%;" formControlName="email">
          <div *ngIf="userForm.get('email')!.hasError('required')
          && userForm.get('email')!.touched" class="text-danger validator-text">
            Email is required.
          </div>
        </td>
      </tr>
      <tr>
        <td colSpan="1" class="col-1 main-td custom-font">Password:</td>
        <td colSpan="1" class="col-2 main-td">
          <input class="custom-input" type="text" style="width: 100%;" formControlName="password">
          <div  *ngIf="userForm.get('password')!.hasError('required')
          && userForm.get('password')!.touched" class="text-danger validator-text">
            Password is required.
          </div>
        </td>
      </tr>
      <tr>
        <td class="col-1 main-td custom-font">Role</td>
        <td class="col-2 main-td">
          <div formArrayName="roles" class="row-2 button-container">
            <button type="button" class="btn custom-button-decline" [ngClass]="{ 'custom-button': isRoleActive('USER'), 'custom-button-decline': !isRoleActive('USER') }" [disabled]="isRoleDisabled('USER')" (click)="toggleRole('USER')">USER</button>
            <button type="button" class="btn custom-button-decline" [ngClass]="{ 'custom-button': isRoleActive('ADMIN'), 'custom-button-decline': !isRoleActive('ADMIN') }" [disabled]="isRoleDisabled('ADMIN')" (click)="toggleRole('ADMIN')">ADMIN</button>
            <button type="button" class="btn custom-button-decline" [ngClass]="{ 'custom-button': isRoleActive('EDITOR'), 'custom-button-decline': !isRoleActive('EDITOR') }" [disabled]="isRoleDisabled('EDITOR')" (click)="toggleRole('EDITOR')">EDITOR</button>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
    <div class="btn confirm-button mb-3"  (click)="validateAndOpenModal()">Submit</div>
  </form>
</div>

<div class="modal fade" id="confirm-edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
  <div class="modal-dialog">
    <div class="modal-content edit-modal">
      <div class="modal-header d-flex justify-content-center" style="font-size: 25px">
        Do you want to add User?
      </div>
      <div class="modal-footer d-flex justify-content-center">
        <button type="button" class="btn custom-button-decline" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn custom-button" data-bs-dismiss="modal" (click)="newUser()">Confirm</button>
      </div>
    </div>
  </div>
</div>


